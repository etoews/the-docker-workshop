<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>The Docker Workshop</title>

		<meta name="description" content="A Docker Workshop based on The Docker Book by James Turnbull">
		<meta name="author" content="Everett Toews">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/night.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

<!-- ********************************************************************** -->

				<section id="welcome">
          <h1>The Docker Workshop</h1>
					<img src="http://ypereirareis.github.io/assets/images/posts/docker.svg"/>
          <h4><a href="http://rack.to/the-docker-workshop">rack.to/the-docker-workshop</a></h4>
					<p style="font-size: 50%;">Use the arrow keys to navigate</p>
        </section>

				<section id="goal">
          <h1>Goal</h1>
          <p>Give you enough knowledge about containers/Docker in general and Amphora in particular to confidently create content for all of it. In doing so, give you the basis for more self-directed learning.</p>
					<aside class="notes">
            <ul>
							<li>Going broad. Looking at the whole ecosystem. It will be up to you to go deep.</li>
							<li>This needs to be very interactive</li>
              <li>More knowledge in the audience than there is on stage</li>
							<li>Being up here is learning for me too</li>
							<li>Some stuff I just haven't used so it's omitted, call that out</li>
							<li>File issues or send PRs!</li>
							<li>Pair up</li>
            </ul>
					</aside>
        </section>

				<section id="the-docker-book">
          <h1>The Docker Book</h1>
					<a href="http://www.dockerbook.com/" target="_blank">
						<img width="250" heigth="auto" src="http://ecx.images-amazon.com/images/I/51VL0BxrnKL._SX381_BO1,204,203,200_.jpg"/></a>
					<p>Sign up for updates!</p>
        </section>

				<section>
          <span style="white-space: nowrap;">
            <h1>Agenda</h1>
            <ol>
              <li><a href="#/benefits">Benefits</a></li>
              <li><a href="#/machine">Machine</a></li>
							<li><a href="#/daemon">Daemon</a></li>
              <li><a href="#/client">Client</a></li>
              <li><a href="#/images">Images</a></li>
							<li><a href="#/registries">Registries</a></li>
							<li><a href="#/compose">Compose</a></li>
							<li><a href="#/conclusion">Conclusion</a></li>
            </ol>
          </span>
        </section>

<!-- ********************************************************************** -->

				<section id="benefits">
          <h1 style="color:DeepSkyBlue">Benefits</h1>
        </section>

				<section>
          <h1>Why?</h1>
        </section>

				<section data-background="http://i.telegraph.co.uk/multimedia/archive/03133/the-eye-of-sauron_3133429b.jpg">
				</section>

				<section>
					<h1>Leaner Than VMs</h1>
					<table>
						<tr>
							<td><img src="https://www.docker.com/sites/default/files/what-is-docker-diagram.png" width="400" height="auto"></td>
							<td><img src="https://www.docker.com/sites/default/files/what-is-vm-diagram.png" width="400" height="auto"></td>
						</tr>
						<tr>
							<td style="text-align:center">VMs</td>
							<td style="text-align:center">Containers</td>
						</tr>
					</table>
				</section>

				<section>
					<h1>Easy Environments</h1>
					<pre><code data-trim class="bash">
docker run \
  --rm \
  --volume=$(pwd):/srv/jekyll \
	--tty \
	--publish 4000:4000 \
	jekyll/jekyll:pages \
	jekyll serve --watch --drafts --force_polling
					</code></pre>
				</section>

				<section>
					<h1>Better DX for Containerized Systems</h1>
					<aside class="notes">
            <ul>
              <li>Don't have to understand an apps deployment as much in order to integrate it into your own system</li>
            </ul>
					</aside>
				</section>

				<section>
					<h1>Cloud Agnostic</h1>
				</section>

				<section>
					<h1>Questions?</h1>
				</section>

<!-- ********************************************************************** -->

				<section id="machine">
          <h1 style="color:DeepSkyBlue">Machine</h1>
					<aside class="notes">
            <ul>
              <li>Not covered in the book :(</li>
            </ul>
					</aside>
        </section>

				<section>
					<h1>Creates Docker Hosts</h1>
					<aside class="notes">
            <ul>
              <li>Machine lets you create Docker hosts on your computer, on cloud providers, and inside your own data center.</li>
							<li>It automatically creates hosts, installs Docker on them, then configures the docker client to talk to them.</li>
							<li>A "machine" is the combination of a Docker host and a configured client.</li>
							<li>A great learning/experimentation tool</li>
            </ul>
					</aside>
				</section>

				<section>
					<h1>Whiteboard!</h1>
				</section>

				<section>
					<h2>Docker Environment</h2>
					<pre><code data-trim class="bash">
alias de="env | grep DOCKER_"
					</code></pre>
				</section>

				<section>
					<h2>Docker Machine</h2>
					<pre><code data-trim class="bash">
docker-machine
docker-machine ls
docker-machine create --driver virtualbox foo
docker-machine ls
docker-machine env foo
de
eval "$(docker-machine env foo)"
de
					</code></pre>
				</section>

				<section>
					<h2>Lab</h2>
					<ol>
						<li>Delete foo</li>
						<li>Create workshop</li>
						<li>Set workshop as your Docker environment</li>
					</ol>
				</section>

				<section>
					<h1>Questions?</h1>
				</section>

<!-- ********************************************************************** -->

				<section id="daemon">
          <h1 style="color:DeepSkyBlue">Daemon</h1>
					<p>Chapter 2, 8</p>
        </section>

				<section>
					<h1>Runs Docker Containers</h1>
					<aside class="notes">
            <ul>
              <li>Can kind of think of it like Cloud Servers/Nova</li>
							<li>Port 2376</li>
							<li>API</li>
            </ul>
					</aside>
				</section>

				<section>
					<h1><a href="https://docs.docker.com/reference/api/docker_remote_api/" target="_blank">Docker API</a></h1>
				</section>

				<section>
					<h1>Whiteboard!</h1>
				</section>

				<section>
					<h2>Docker Daemon</h2>
					<pre><code data-trim class="bash">
docker info
curl --insecure --cert $DOCKER_CERT_PATH/cert.pem --key $DOCKER_CERT_PATH/key.pem https://$(docker-machine ip workshop):2376/images/json
# https://github.com/docker/docker/issues/16107
					</code></pre>
				</section>

				<section>
					<h1>No Lab</h1>
				</section>

				<section>
					<h1>Questions?</h1>
				</section>

<!-- ********************************************************************** -->

				<section id="client">
          <h1 style="color:DeepSkyBlue">Client</h1>
					<p>Chapter 3</p>
        </section>

				<section>
					<h1>Controls the Docker Daemon</h1>
					<p><a href="https://docs.docker.com/reference/commandline/daemon/" target="_blank">Reference</a>
					<aside class="notes">
            <ul>
              <li>CLI for the API</li>
							<li>Commands for working with containers</li>
							<li>Commands for working with images</li>
            </ul>
					</aside>
				</section>

				<section>
					<h1>Whiteboard!</h1>
				</section>

				<section>
					<h2>Client</h2>
					<pre><code data-trim class="bash">
de
docker
docker version
docker ps # why "ps"?
docker run --interactive --tty ubuntu /bin/bash
					</code></pre>
				</section>

				<section>
					<h2>Ubuntu Container</h2>
					<pre><code data-trim class="bash">
uname -a
hostname
more /cat/hosts
ip a
ps -aux
echo "Hello Docker" > README.txt
exit
					</code></pre>
				</section>

				<section>
					<h2>Client</h2>
					<pre><code data-trim class="bash">
docker ps
docker ps --all
docker ps --all --quiet
docker start $(docker ps -a -q)
docker ps
docker attach $(docker ps -q)
more README.txt
exit
					</code></pre>
				</section>

				<section>
					<h2>Client</h2>
					<pre><code data-trim class="bash">
docker ps
docker run -it ubuntu /bin/bash # -it?
more README.txt
exit
					</code></pre>
				</section>

				<section>
					<h2>Client</h2>
					<pre><code data-trim class="bash">
docker ps -a
docker rm $(docker ps -a -q)
docker ps -a
					</code></pre>
				</section>

				<section>
					<h2>Client</h2>
					<pre><code data-trim class="bash">
docker run --detach --publish 8080:2368 ghost
open http://$(docker-machine ip workshop):8080
docker exec -it $(docker ps -q) /bin/bash # look around
exit
docker ps
docker stop $(docker ps -a -q)
docker rm $(docker ps -a -q)
					</code></pre>
				</section>

				<section>
					<h2>Lab</h2>
					<ol>
						<li>Run an nginx container in detached mode</li>
						<li>Bind the container port 80 to the host port 80</li>
						<li>View the default nginx landing page</li>
						<li>Bonus Points: Append to the default nginx landing page</li>
						<li>Stop the container and remove it</li>
					</ol>
				</section>

				<section>
					<h1>Questions?</h1>
				</section>

<!-- ********************************************************************** -->

				<section id="images">
					<h1 style="color:DeepSkyBlue">Images</h1>
					<p>Chapter 4</p>
				</section>

				<section>
					<h1>Building Blocks for Containers</h1>
					<p><a href="https://docs.docker.com/reference/builder/" target="_blank">Reference</a>
					<aside class="notes">
						<ul>
							<li>You can kinda sorta think of it like an image for a VM, but really it's a very different beast</li>
							<li>Layered filesystems</li>
							<li>Top layer is rw and the layers below are ro</li>
							<li>The Git analogy but we won't be using commit</li>
						</ul>
					</aside>
				</section>

				<section>
					<h1>Whiteboard!</h1>
				</section>

				<section>
					<h2>Images</h2>
					<pre><code data-trim class="bash">
docker images
docker pull ubuntu:12.04
docker images
docker search python
					</code></pre>
				</section>

				<section>
					<h1>Dockerfile</h1>
					<aside class="notes">
						<ul>
							<li>Uses a basic DSL with instructions for building Docker images</li>
							<li>Provides a repeatable, transparent, and idempotent mechanism for creating images</li>
							<li>Each instruction adds a new layer to the image and then commits the image</li>
						</ul>
					</aside>
				</section>

				<section>
					<h2>Dockerfile Setup</h2>
					<pre><code data-trim class="bash">
mkdir static_web
cd static_web
touch Dockerfile
# edit Dockerfile
					</code></pre>
				</section>

				<section>
					<h2>Dockerfile</h2>
					<pre><code data-trim class="bash">
FROM ubuntu:14.04
MAINTAINER Firstname Lastname "firstname.lastname@example.com"
RUN apt-get update
RUN apt-get install -y nginx
ENV MESSAGE "Hello Docker"
WORKDIR /usr/share/nginx/html/
RUN echo "$MESSAGE" >> index.html
COPY Dockerfile Dockerfile.html
EXPOSE 80
CMD nginx -g "daemon off;"
					</code></pre>
				</section>

				<section>
					<h2>Images</h2>
					<pre><code data-trim class="bash">
docker build --tag="my-docker-hub-username/static_web:1.0" .
docker images
sed -i "" "s/nginx/ngin/g" Dockerfile
docker build --tag="my-docker-hub-username/static_web:1.1" .
docker run -it last-good-image-id /bin/bash
					</code></pre>
				</section>

				<section>
					<h2>Images</h2>
					<pre><code data-trim class="bash">
docker run --detach --publish-all my-docker-hub-username/static_web:1.0
docker ps
HOST=$(docker-machine ip workshop)
PORT=$(docker inspect --format='{{(index (index .NetworkSettings.Ports "80/tcp") 0).HostPort}}' $(docker ps -q))
open http://$HOST:$PORT
docker stop $(docker ps -a -q)
docker rm $(docker ps -a -q)
					</code></pre>
				</section>

				<section>
					<h2>Lab</h2>
					<ol>
						<li>Create your own Dockerfile</li>
						<li>Build an image</li>
						<li>Run a container</li>
						<li>Suggestions: Tomcat, Jekyll, Apache</li>
						<li>Stop the container and remove it</li>
					</ol>
				</section>

				<section>
					<h1>Questions?</h1>
				</section>

<!-- ********************************************************************** -->

				<section id="conclusion">
					<h1 style="color:DeepSkyBlue">Conclusion</h1>
				</section>

				<section>
					<h1>Keep a Crib Sheet</h1>
				</section>

				<section>
					<h1>Questions?</h1>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
        progress: false,
        history: true,
        center: true,

        transition: 'none', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
